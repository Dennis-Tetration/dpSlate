
<%# load the default directives in the Markdown file from source to current folder then add the document directives %>
<% defaults=get_defaults("source/" + File.dirname(current_page.path)) %>
<% defaults.update(current_page.data) %>
<% defaults["mtime"] = current_page.mtime %>
<% page_content = get_settings_variables( yield, defaults) %>
<!doctype html>
<!--DO NOT EDIT THIS FILE. This HTML file is generated from Markdown that can be found in /dpslate/source-->
<html>
  <head>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>  <%= defaults["title"] %> </title>

    <%= stylesheet_link_tag 'bootstrap.min', media: :screen %>
    <%= stylesheet_link_tag :screen, media: :screen %>
    <%= stylesheet_link_tag :print, media: :print %>

    <% if !defaults["leftPanel"] %>
      <%= stylesheet_link_tag :inlinecode_screen, media: :screen %>
      <% defaults["languageTabs"] = [] %>
      <% defaults["tocAccordion"] = 6 %>
    <% end %>
    <% if !defaults["rightPanel"] %>
      <%= stylesheet_link_tag :inlinecode_screen, media: :screen %>
      <% defaults["languageTabs"] = [] %>
    <% end %>

     <style>
      <%= Rouge::Themes::Base16::Monokai.render(:scope => '.highlight') %>
    </style>

  </head>

  <body class="<%= page_classes %>"
        data-spy="scroll"
        data-target=".scrollspy"
        data-languages="<%= defaults["languageTabs"].map{ |lang| lang.is_a?(Hash) ? lang.keys.first : lang }.to_json %>">
      
   <!-- All bootstrap modals should be directly in the body tag to overide problems with modal display; Title Page, Settings, Versions, and Links -->  
   <%= build_modals (defaults) %>
   
      <div class="container-fluid slate-fluid">
   <!-- Example row of columns -->
      <div class="row-fluid slate-fluid">

        <div id="slateWrapper">

          <div id="leftPanel" class="span2 <% if !defaults["leftPanel"] %> col-xs-12 <% else %>col-xs-12 col-md-2<% end %>">

            <div id="frontmatter" class="scrollspy"
                     data-spy="affix"
                     data-offset-top="0"
                     data-offset-bottom="0"
                 >
                
                <div class="doc-title" >
                    <%= defaults["title"] %>
                </div>

                <div class="nav-bar">
                    <%= build_button_group (defaults) %>
                </div> 
                
                <% if defaults["documentSearch"] %>
                    <div id="searchTool" class="search collapse">
                      <form>
                        <input type="text" id="input-search" placeholder="Search Document">
                      </form>
                      <div class="search-results"></div>
                    </div>
                <% end %>
                
            <% if defaults["tableOfContents"] %>
              <div id="toc" class="collapse in">

                <div class=toc-header>

                  <div class=toc-title>

                    Table of Contents

                  </div>

                </div>

                <div >

                      <%= build_toc(page_content, defaults["tocSelectors"]) %>

                </div>

              </div>

            <% end %>

          </div>

        </div>

        <div class="span10 col-xs-12 col-md-10">

          <div class="page-wrapper">

            <div class="dark-box"></div>

            <div class="content" id="documentContent">
               <% if defaults["paginateDocument"] %>
                   <%= add_sections(page_content) %>
                   <ul class="pager" id="sectionNav">
                       <li class="previous" id="prevSection" ><a href="" class="prev">Previous</a></li>
                       <li class="next" id="nextSection" ><a href="" class="next">Next</a></li>
                   </ul>
                <% else %>
                   <%= page_content %>
                <% end %>
           </div>

            <div class="dark-box">

              <% if defaults["languageTabs"] %>
                <div class="lang-selector" id="myLang">
                  <% defaults["languageTabs"].each_with_index do |lang, index| %>
                    <% if index == 0 %>
                      <% classValue = "class='active'" %>
                    <% else %>
                      <% classValue = "" %>
                    <% end %>
                    <% if lang.is_a? Hash %>
                      <a href="#" data-language-name="<%= lang.keys.first %>" <%= classValue %> ><%= lang.values.first %></a>
                    <% else %>
                      <a href="#" data-language-name="<%= lang %>" <%= classValue %> ><%= lang %></a>
                    <% end %>
                  <% end %>
                </div>
              <% end %>

            </div>

          </div>

         </div>

        </div>

      </div>

  </div>

<!-- Add all of the JavaScript at the end -->

<%= javascript_include_tag "jquery.min" %>
<%= javascript_include_tag "jquery.lazyload.min" %>
<%= javascript_include_tag "bootstrap.min" %>
<%= javascript_include_tag "energize" %>
<%= javascript_include_tag "lang" %>
<%= javascript_include_tag "jquery-scrolltofixed-min" %>
<%= javascript_include_tag  "imagesloaded.min" %>

<% if defaults["paginateDocument"] %>
      
    <script>
        $(document).ready(function(){
            $("section").each(function(e) {
                if (e != 0)
                    $(this).hide();
            });

            $("#nextSection").click(function(){
                if ($("section:visible").next().length != 0)
                    $("section:visible").next().show().prev().hide();
                else {
                    $("section:visible").hide();
                    $("section:first").show();
                }
                $(window).scrollTop($("section:visible").children(":first-child").offset());
                return false;
            });

            $("#prevSection").click(function(){
                if ($("section:visible").prev().length != 0)
                    $("section:visible").prev().show().next().hide();
                else {
                    $("section:visible").hide();
                    $("section:last").show();
                }
                $(window).scrollTop($("section:visible").children(":first-child").offset());
                return false;
            });
        });
    </script>
      
<% end %>
      
<% if defaults["documentSearch"] %>
  <%= javascript_include_tag  "lunr" %>
  <%= javascript_include_tag  "jquery.highlight" %>
  <%= javascript_include_tag  "search" %>
  <script>
    $('#documentSearch').on('click', function toggleSearch(e) {
      if($('button.docSearchBtn span').hasClass('glyphicon glyphicon-search')) {
        $('button.docSearchBtn').html('<span class="glyphicon glyphicon-th-list"></span>'); 
      }
      else {      
        $('button.docSearchBtn').html('<span class="glyphicon glyphicon-search"></span>'); 
      }
      $("#input-search").val("").keyup();
      $("#searchTool").collapse("toggle");
      $("#toc").collapse("toggle");
      $("#input-search").focus();
    });
  </script>
<% end %>

<script>
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip(); 
    $('[data-toggle="popover"]').popover();   
  });

</script>

<script>

    
</script>

<script>

  $(function() {
    $("img.lazy").lazyload({
        threshold : 200
    });
  });

</script>


<!-- Configure the language tabs -->

<% if defaults["languageTabs"] %>

  <script>

    $(function() {
        setupLanguages(<%= defaults["languageTabs"].map{ |lang| lang.is_a?(Hash) ? lang.keys.first : lang }.to_json %>);
    });

   $('#myLang').scrollToFixed({marginTop: 0,
      preFixed: function() {},
      postFixed: function() {}
    });

  </script>

<% end %>

<% if defaults["tableOfContents"]  %>

  <!-- configure the accordion function on the table of contents -->
  <style>
    <% for i in 1..defaults["tocAccordion"].to_i %>
        .toc-submenu-<%= i %> { display: block }
    <% end %>
  </style>



  <% end %>

</body>
</html>

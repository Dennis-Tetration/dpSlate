
<%# load the default directives in the Markdown file from source to current folder then add the document directives %>
<% defaults=get_defaults("source/" + File.dirname(current_page.path)) %>
<% defaults.update(current_page.data) %>
<% page_content = yield %>
<!doctype html>
<!--DO NOT EDIT THIS FILE. This HTML file is generated from Markdown that can be found in /dpslate/source-->
<html>
  <head>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>  <%= defaults["title"] %> </title>

    <%= stylesheet_link_tag 'bootstrap.min', media: :screen %>
    <%= stylesheet_link_tag :screen, media: :screen %>
    <%= stylesheet_link_tag :print, media: :print %>

    <% if !defaults["leftPanel"] %>
      <%= stylesheet_link_tag :inlinecode_screen, media: :screen %>
      <% defaults["languageTabs"] = [] %>
      <% defaults["tocAccordion"] = 6 %>
    <% end %>
    <% if !defaults["rightPanel"] %>
      <%= stylesheet_link_tag :inlinecode_screen, media: :screen %>
      <% defaults["languageTabs"] = [] %>
    <% end %>

     <style>
      <%= Rouge::Themes::Base16::Monokai.render(:scope => '.highlight') %>
    </style>

  </head>

  <body class="<%= page_classes %>"
        data-spy="scroll"
        data-target=".scrollspy"
        data-languages="<%= defaults["languageTabs"].map{ |lang| lang.is_a?(Hash) ? lang.keys.first : lang }.to_json %>">

 <div class="container-fluid slate-fluid">
   <!-- Example row of columns -->
      <div class="row-fluid slate-fluid">

        <div id="slateWrapper">

          <div class="span3 <% if !defaults["leftPanel"] %> col-xs-12 <% else %>col-xs-12 col-md-3<% end %>">

            <div id="frontmatter">

            <% if defaults["tableOfContents"] %>

              <% if defaults["titlePage"] %>

                <div class=doc-title class=title-page >
                    <%= defaults["title"] %> <a href="#titlePage" class="texttrigger" data-toggle="modal"><span class="glyphicon glyphicon-info-sign"></span></a>
                    <% if defaults["documentSearch"] %>
                       <a href="#" onclick="showsearch();"><span class="glyphicon glyphicon-search"></span></a>
                    <% end %>
                </div>

                  <!-- Modals -->
                  <div class="modal fade"
                       id="titlePage"
                       tabindex="-1"
                       role="dialog"
                       aria-labelledby="myModalLabel">

                    <div class="modal-dialog" role="document">

                      <div class="modal-content">

                        <div class="modal-header">

                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span></button>

                          <h4 class="modal-title" id="myModalLabel">
                            Title Page
                          </h4>

                        </div>

                        <div class="modal-body about">

                            <div class="title-page">
                                <h1>
                                  <%= defaults["title"] %>
                                </h1>

                                <h2>
                                  <%= defaults["version"] %>
                                </h2>

                                <p>
                                  <%= defaults["copyright"] %>
                                </p>

                                <p>
                                  <%= defaults["publisher"] %>
                                </p>

                                <p>
                                  <%= defaults["publisherAddress"] %>
                                </p>

                                <p>
                                  <%= defaults["comments"] %>
                                </p>

                                <p>
                                  <%= datestring %>
                                </p>
                                
                            </div>

                        </div>

                        <div class="modal-footer">
                          <a href="#pageDirectives" class="texttrigger" data-toggle="modal"><span class="glyphicon glyphicon-cog"></span></a> 
                          <button type="button" class="btn btn-default tocHelp" data-dismiss="modal">
                            Close
                          </button>

                        </div>

                      </div>

                    </div>
                      
                    </div>
                    
                <div class="modal fade"
                       id="pageDirectives"
                       tabindex="-1"
                       role="dialog"
                       aria-labelledby="myModalLabel">

                    <div class="modal-dialog" role="document">

                      <div class="modal-content">

                        <div class="modal-header">

                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span></button>

                          <h4 class="modal-title" id="myModalLabel">
                            Page Directives
                          </h4>

                        </div>

                        <div class="modal-body about">

                            <div class="page-directives">
                              <p>
                                <%= hash_to_yaml (defaults) %>
                              </p>

                            </div>

                        </div>

                        <div class="modal-footer">

                          <button type="button" class="btn btn-default tocHelp" data-dismiss="modal">
                            Close
                          </button>

                        </div>

                      </div>

                    </div>

                  </div>


              <% end %>

              <% if defaults["documentSearch"] %>

                <div class="search">

                  <input type="text"
                         class="search"
                         id="input-search"
                         placeholder="Search Document">

                  <ul class="search-results invisible"></ul>

                </div>

              <% end %>

              <div id="toc">

                <div class=toc-header>

                  <div class=toc-title>

                    Table of Contents

                  </div>

                </div>

                <div class="scrollspy"
                     data-spy="affix"
                     data-offset-top="205"
                     data-offset-bottom="20">

                      <%= build_toc(page_content, defaults["tocSelectors"]) %>

                </div>

                <% if !defaults["tocFooters"].blank? %>

                <div class="toc-footer">

                  <ul class="toc-footer">

                    <% defaults["tocFooters"].each do |footer| %>

                      <li><%= footer %></li>

                    <% end %>

                  </ul>

                </div>

                <% end %>

              </div>

            <% end %>

          </div>

        </div>

        <div class="span9 col-xs-12 col-md-9">

          <div class="page-wrapper">

            <div class="dark-box"></div>

            <div class="content" id="documentContent">
               <% if defaults["paginateDocument"] %>
                   <%= add_sections(page_content) %>
                   <ul class="pager" id="sectionNav">
                       <li class="previous" id="prevSection" ><a href="" class="prev">Previous</a></li>
                       <li class="next" id="nextSection" ><a href="" class="next">Next</a></li>
                   </ul>
                <% else %>
                   <%= page_content %>
                <% end %>
           </div>

            <div class="dark-box">

              <% if defaults["languageTabs"] %>
                <div class="lang-selector" id="myLang">
                  <% defaults["languageTabs"].each_with_index do |lang, index| %>
                    <% if index == 0 %>
                      <% classValue = "class='active'" %>
                    <% else %>
                      <% classValue = "" %>
                    <% end %>
                    <% if lang.is_a? Hash %>
                      <a href="#" data-language-name="<%= lang.keys.first %>" <%= classValue %> ><%= lang.values.first %></a>
                    <% else %>
                      <a href="#" data-language-name="<%= lang %>" <%= classValue %> ><%= lang %></a>
                    <% end %>
                  <% end %>
                </div>
              <% end %>

            </div>

          </div>

         </div>

        </div>

      </div>

  </div>

<!-- Add all of the JavaScript at the end -->

<%= javascript_include_tag "jquery.min" %>
<%= javascript_include_tag "jquery.lazyload.min" %>
<%= javascript_include_tag "bootstrap.min" %>
<%= javascript_include_tag "energize" %>
<%= javascript_include_tag "lang" %>
<%= javascript_include_tag "jquery-scrolltofixed-min" %>
<%= javascript_include_tag  "imagesloaded.min" %>

<% if defaults["paginateDocument"] %>
      
    <script>
        $(document).ready(function(){
            $("section").each(function(e) {
                if (e != 0)
                    $(this).hide();
            });

            $("#nextSection").click(function(){
                if ($("section:visible").next().length != 0)
                    $("section:visible").next().show().prev().hide();
                else {
                    $("section:visible").hide();
                    $("section:first").show();
                }
                $(window).scrollTop($("section:visible").children(":first-child").offset());
                return false;
            });

            $("#prevSection").click(function(){
                if ($("section:visible").prev().length != 0)
                    $("section:visible").prev().show().next().hide();
                else {
                    $("section:visible").hide();
                    $("section:last").show();
                }
                $(window).scrollTop($("section:visible").children(":first-child").offset());
                return false;
            });
        });
    </script>
      
<% end %>
      
<% if defaults["documentSearch"] %>
  <%= javascript_include_tag  "lunr" %>
  <%= javascript_include_tag  "jquery.highlight" %>
  <%= javascript_include_tag  "search" %>
<% end %>

<script>
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip(); 
    $('[data-toggle="popover"]').popover();   
  });
    
</script>

<script>

  $(function() {
    $("img.lazy").lazyload({
        threshold : 200
    });
  });

</script>


<!-- Configure the language tabs -->

<% if defaults["languageTabs"] %>

  <script>

    $(function() {
        setupLanguages(<%= defaults["languageTabs"].map{ |lang| lang.is_a?(Hash) ? lang.keys.first : lang }.to_json %>);
    });

   $('#myLang').scrollToFixed({marginTop: 0,
      preFixed: function() {},
      postFixed: function() {}
    });

  </script>

<% end %>

<% if defaults["tableOfContents"]  %>

  <!-- configure the accordion function on the table of contents -->
  <style>
    <% for i in 1..defaults["tocAccordion"].to_i %>
        .toc-submenu-<%= i %> { display: block }
    <% end %>
  </style>



  <% end %>

</body>
</html>
